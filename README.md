# ğŸŒ² The Wild Oasis

A luxury cabin booking application where guests can explore beautiful mountain retreats, manage their profile, and book their next getaway. Built with **Next.js**, **Supabase**, and **Tailwind CSS**.

## âœ¨ Features

- **Dynamic Cabin Exploration**: Browse available cabins with real-time data from Supabase.
- **Advanced Booking System**: Custom-built calendar using `react-day-picker` with logic to block out existing reservations.
- **User Authentication**: Secure login via NextAuth.js (Google Provider).
- **Guest Profile**: Manage personal details and view booking history.
- **Server Actions**: High-performance data mutations for creating and updating reservations.
- **Optimized Performance**: Optimized images with Next/Image and efficient data fetching with React Suspense.

## ğŸ› ï¸ Tech Stack

- **Framework**: [Next.js 16](https://nextjs.org/) (App Router)
- **Database & Auth**: [Supabase](https://supabase.com/)
- **Styling**: [Tailwind CSS](https://tailwindcss.com/)
- **Date Handling**: [date-fns](https://date-fns.org/)
- **Icons**: [Heroicons](https://heroicons.com/)

## ğŸš€ Getting Started

### 1. Clone the repository

git clone https://github.com/AnkitDeshpande/the-wild-oasis.git
cd the-wild-oasis


### 2. Install dependencies

```
npm install or bun install
````

### 3. Set up environment variables

Create a `.env.local` file in the root directory and add your Supabase and Auth credentials:

```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

AUTH_SECRET=your_auth_secret
AUTH_GOOGLE_ID=your_google_client_id
AUTH_GOOGLE_SECRET=your_google_client_secret

```

---

## ğŸ—„ï¸ Database Schema

The project uses **Supabase (PostgreSQL)**. Below are the table definitions.

> [!IMPORTANT]
> After creating these tables, you must **manually populate** the `cabins` and `settings` tables via the Supabase Dashboard to ensure the application has data to display (prices, capacities, etc.).

### 1. Guests Table

Stores authenticated user information.

```sql
create table public.guests (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  "fullName" text null,
  email text null,
  "nationalID" text null,
  nationality text null,
  "countryFlag" text null,
  constraint guests_pkey primary key (id)
);

```

### 2. Cabins Table

Stores details for the individual luxury cabins.

```sql
create table public.cabins (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  name text null,
  "maxCapacity" smallint null,
  "regularPrice" smallint null,
  discount smallint null,
  description text null,
  image text null,
  constraint cabins_pkey primary key (id)
);

```

### 3. Bookings Table

Handles the reservations and links guests to cabins.

```sql
create table public.bookings (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  "startDate" timestamp without time zone null,
  "endDate" timestamp without time zone null,
  "numNights" smallint null,
  "numGuests" smallint null,
  "cabinPrice" real null,
  "extrasPrice" real null,
  "totalPrice" real null,
  status text null,
  "hasBreakfast" boolean null,
  "isPaid" boolean null,
  observations text null,
  "cabinId" bigint null,
  "guestId" bigint null,
  constraint bookings_pkey primary key (id),
  constraint bookings_cabinId_fkey foreign key ("cabinId") references cabins (id),
  constraint bookings_guestId_fkey foreign key ("guestId") references guests (id)
);

```

### 4. Settings Table

Global configuration for the booking engine.

```sql
create table public.settings (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  "minBookingLength" smallint null,
  "maxBookingLength" smallint null,
  "maxGuestPerBooking" smallint null,
  "breakfastPrice" real null,
  constraint settings_pkey primary key (id)
);

```

---


### 4. Run the development server

```bash
npm run dev

OR

bun dev
```

Open [http://localhost:3000](https://www.google.com/search?q=http://localhost:3000) to see the result.

## ğŸ“ Project Structure (App Router)

The project follows a nested route structure in the `app` directory, utilizing Next.js 16 features like Route Groups and Dynamic Segments:

```text
app/
â”œâ”€â”€ about/                # Information about the sanctuary
â”œâ”€â”€ account/              # User dashboard
â”‚   â”œâ”€â”€ profile/          # Guest profile settings
â”‚   â””â”€â”€ reservations/     # List of guest bookings
â”‚       â””â”€â”€ edit/         # Edit logic
â”‚           â””â”€â”€ [bookingId] # Dynamic route to edit specific bookings
â”œâ”€â”€ api/                  # Backend endpoints
â”‚   â”œâ”€â”€ auth/             # NextAuth.js configuration
â”‚   â””â”€â”€ cabins/           # API routes for cabin data
â”œâ”€â”€ cabins/               # Main cabin listings
â”‚   â”œâ”€â”€ thankyou/         # Post-booking confirmation page
â”‚   â””â”€â”€ [cabinId]         # Individual cabin details and booking form
â”œâ”€â”€ login/                # Authentication page
â”œâ”€â”€ _components/          # Reusable UI (SubmitButtons, Navigation, etc.)
â”œâ”€â”€ _lib/                 # Actions, data-services, and auth logic
â””â”€â”€ _styles/
```

## ğŸ“ License

Distributed under the MIT License.